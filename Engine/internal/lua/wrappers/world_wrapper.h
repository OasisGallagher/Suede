// Warning: this file is generated by wrapper.py.

#pragma once

#include "world.h"

#include "lua++.h"
#include "tools/string.h"

class Environment_Wrapper {
	static int ToString(lua_State* L) {
		Environment* _p = Lua::callerPtr<Environment>(L);

		lua_pushstring(L, String::Format("Environment@0x%p", _p).c_str());
		return 1;
	}

public:
	static void create(lua_State* L) {
		Lua::createMetatable<Environment>(L);
	}
	
	static void initialize(lua_State* L, std::vector<luaL_Reg>& funcs, std::vector<luaL_Reg>& fields) {
		luaL_Reg metalib[] = {
			{ "__gc", Lua::deletePtr<Environment> },
			{ "__tostring", ToString }, 
			{ nullptr, nullptr }
		};

		Lua::initMetatable<Environment>(L, metalib, nullptr);
	}
};

class FrameStatistics_Wrapper {
	static int NewFrameStatistics(lua_State* L) {
		return Lua::newObject<FrameStatistics>(L);
	}

	static int ToString(lua_State* L) {
		FrameStatistics* _p = Lua::callerPtr<FrameStatistics>(L);

		lua_pushstring(L, String::Format("FrameStatistics@0x%p", _p).c_str());
		return 1;
	}

public:
	static void create(lua_State* L) {
		Lua::createMetatable<FrameStatistics>(L);
	}
	
	static void initialize(lua_State* L, std::vector<luaL_Reg>& funcs, std::vector<luaL_Reg>& fields) {
		funcs.push_back(luaL_Reg { "NewFrameStatistics", NewFrameStatistics });

		luaL_Reg metalib[] = {
			{ "__gc", Lua::deletePtr<FrameStatistics> },
			{ "__tostring", ToString }, 
			{ nullptr, nullptr }
		};

		Lua::initMetatable<FrameStatistics>(L, metalib, nullptr);
	}
};

class World_Wrapper {
	static int ToString(lua_State* L) {
		World* _p = Lua::callerPtr<World>(L);

		lua_pushstring(L, String::Format("World@0x%p", _p).c_str());
		return 1;
	}

	static int ToStringStatic(lua_State* L) {
		lua_pushstring(L, "static World");
		return 1;
	}

	static int WorldStatic(lua_State* L) {
		lua_newtable(L);

		luaL_Reg funcs[] = {
			{ "Initialize", Initialize },
			{ "Finalize", Finalize },
			{ "Update", Update },
			{ "CullingUpdate", CullingUpdate },
			{ "DestroyGameObject", DestroyGameObject },
			{ "RaiseEvent", RaiseEvent },
			{ "RaiseEventImmediate", RaiseEventImmediate },
			{ "GetDecals", GetDecals },
			{"__tostring", ToStringStatic },
			{ nullptr, nullptr }
		};

		luaL_setfuncs(L, funcs, 0);

		return 1;
	}
	// static void Initialize()
	static int Initialize(lua_State* L) {
		World::Initialize();
		return 0;
	}

	// static void Finalize()
	static int Finalize(lua_State* L) {
		World::Finalize();
		return 0;
	}

	// static void Update()
	static int Update(lua_State* L) {
		World::Update();
		return 0;
	}

	// static void CullingUpdate()
	static int CullingUpdate(lua_State* L) {
		World::CullingUpdate();
		return 0;
	}

	// static void DestroyGameObject(uint id)
	static int DestroyGameObject(lua_State* L) {
		uint id = Lua::get<uint>(L, 1);
		
		World::DestroyGameObject(id);
		return 0;
	}

	// static void RaiseEvent(WorldEventBasePtr e)
	static int RaiseEvent(lua_State* L) {
		WorldEventBasePtr e = Lua::get<WorldEventBasePtr>(L, 1);
		
		World::RaiseEvent(e);
		return 0;
	}

	// static void RaiseEventImmediate(WorldEventBasePtr e)
	static int RaiseEventImmediate(lua_State* L) {
		WorldEventBasePtr e = Lua::get<WorldEventBasePtr>(L, 1);
		
		World::RaiseEventImmediate(e);
		return 0;
	}

	// static void GetDecals(std::vector<Decal>& container)
	static int GetDecals(lua_State* L) {
		std::vector<Decal> container = Lua::getList<Decal>(L, 1);
		
		World::GetDecals(container);
		return 0;
	}

public:
	static void create(lua_State* L) {
		Lua::createMetatable<World>(L);
	}
	
	static void initialize(lua_State* L, std::vector<luaL_Reg>& funcs, std::vector<luaL_Reg>& fields) {
		fields.push_back(luaL_Reg{ "World", WorldStatic });

		luaL_Reg metalib[] = {
			{ "__gc", Lua::deletePtr<World> },
			{ "__tostring", ToString }, 
			{ nullptr, nullptr }
		};

		Lua::initMetatable<World>(L, metalib, nullptr);
	}
};
